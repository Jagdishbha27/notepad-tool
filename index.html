<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Notepad Tool</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        /* Custom viewport settings for desktop mode on mobile */
        @-ms-viewport{
            width: device-width;
        }
        @-o-viewport{
            width: device-width;
        }
        @viewport{
            width: device-width;
        }
        
        html, body {
            width: 100%;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Prevent content from being too wide on desktop mode */
        .container {
            width: 100%;
            max-width: 1200px;
            padding-left: 15px;
            padding-right: 15px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Notepad Tool Styles */
        .notepad-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Unified container with single border */
        .notepad-main-container {
            border: 1px solid #dee2e6;
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
            overflow: hidden;
            margin-bottom: 30px;
            background-color: #fff;
        }
        
        /* Adjust toolbar to fit in container */
        .notepad-main-container .toolbar {
            border-left: none;
            border-right: none;
            border-top: none;
            border-radius: 0;
            margin-bottom: 0;
        }
        
        /* Adjust editor container in main container */
        .notepad-main-container .editor-container {
            border-left: none;
            border-right: none;
            border-top: 1px solid #dee2e6;
            border-bottom: 1px solid #dee2e6;
            border-radius: 0;
        }
        
        /* Override focus styles for editor in main container */
        .notepad-main-container .editor-container:focus-within {
            border-color: #4b94fe;
            border-left: 1px solid #4b94fe;
            border-right: 1px solid #4b94fe;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
            position: relative;
            z-index: 1;
        }
        
        /* Add a highlight effect to the entire focused editor container */
        .editor-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            border: 2px solid transparent;
            transition: border-color 0.2s ease;
        }
        
        .editor-container:focus-within:before {
            border-color: #4b94fe;
        }
        
        /* Adjust status bar */
        .notepad-main-container .status-bar {
            border-left: none;
            border-right: none;
            border-radius: 0;
        }
        
        /* Style saved notes section */
        .saved-notes-section {
            border-top: 1px solid #dee2e6;
            background-color: #f8f9fa;
        }
        
        .saved-notes-section .card-header {
            background-color: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .saved-notes-section .card-body {
            padding: 20px;
        }
        
        /* Action buttons container within main container */
        .notepad-main-container .action-buttons-container {
            padding: 15px;
            border-top: 1px solid #dee2e6;
            background-color: #f8f9fa;
            margin-bottom: 0;
        }

        .toolbar {
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px 4px 0 0;
            padding: 15px 10px;
            margin-bottom: 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start;
            gap: 5px;
        }

        .toolbar .btn-group {
            margin-right: 10px;
            margin-bottom: 5px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            border-radius: 4px;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .toolbar-group .btn-group {
            margin-right: 0;
        }
        
        /* Make button groups in toolbar look consistently sized */
        .toolbar-group .btn-group .btn {
            padding: 6px 10px;
            margin: 0 2px;
            min-width: 34px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Fix for spacing in toolbar */
        .toolbar-group .btn-group,
        .toolbar-group .input-group {
            margin: 0 auto 5px auto;
        }

        .toolbar .btn i {
            font-size: 16px;
            width: 16px;
            height: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .toolbar .btn:hover {
            background-color: rgba(0, 123, 255, 0.1);
        }

        /* Make editor outline visible on all sides with improved styling */
        .editor-container {
            position: relative;
            height: 500px;
            border: 1px solid #dee2e6;
            padding: 0;
            margin: 0;
            background-color: #fff;
            overflow: hidden;
        }
        
        /* Full outline visible when editor is focused */
        .editor-container:focus-within {
            border-color: #4b94fe;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
        }

        .editor {
            width: 100%;
            height: 100%;
            padding: 15px;
            overflow-y: auto;
            outline: none;
            font-family: Arial, sans-serif;
            font-size: 14px;
            line-height: 1.5;
            background-color: #ffffff;
            color: #333;
            border: none;
            transition: all 0.2s ease;
        }

        .editor:focus {
            outline: none;
            background-color: #fafafa;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            padding: 5px 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-top: none;
            font-size: 0.8rem;
        }

        .status-info {
            display: flex;
            gap: 15px;
        }

        /* Find container styling improvements */
        .find-container {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #fff;
            padding: 15px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
            z-index: 100;
            display: none;
            width: 350px;
            max-width: 90%;
        }

        .find-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .find-header h5 {
            margin: 0;
            font-size: 1rem;
            color: #495057;
            display: flex;
            align-items: center;
        }
        
        .find-header h5 i {
            color: #007bff;
        }

        /* Find buttons styling */
        #find-container .btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #find-container .form-check {
            margin-bottom: 0;
        }
        
        #find-results {
            padding: 5px;
            border-radius: 4px;
            background-color: #f8f9fa;
            text-align: center;
        }

        mark {
            background-color: #ffeb3b;
            color: #000;
        }

        mark.active-find {
            background-color: #ff9800;
            color: #000;
        }

        /* Group styling for toolbar */
        .toolbar-group {
            background-color: rgba(0,0,0,0.02);
            border-radius: 6px;
            padding: 8px 6px;
            margin: 0 5px 10px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }
        
        .toolbar-group-label {
            font-size: 10px;
            color: #6c757d;
            text-transform: uppercase;
            margin: 0 0 4px 0;
            letter-spacing: 0.5px;
            text-align: center;
            width: 100%;
        }

        /* Centered toolbar divider */
        .toolbar-divider {
            display: inline-block;
            height: 24px;
            margin: 0 12px;
            border-right: 1px solid #dee2e6;
            vertical-align: middle;
            align-self: center;
        }
        
        /* Center input groups within toolbar groups */
        .toolbar-group .d-flex {
            justify-content: center;
            width: 100%;
        }
        
        /* Center theme options */
        .dropdown-menu .d-flex {
            justify-content: center;
        }

        /* Icon colors */
        .fa-file {
            color: #4285F4;
        }
        
        .fa-folder-open {
            color: #FBBC05;
        }
        
        .fa-save {
            color: #34A853;
        }
        
        .fa-print {
            color: #9C27B0;
        }
        
        .fa-undo, .fa-redo {
            color: #FF5722;
        }
        
        .fa-cut {
            color: #F44336;
        }
        
        .fa-copy {
            color: #2196F3;
        }
        
        .fa-paste {
            color: #009688;
        }
        
        .fa-search {
            color: #673AB7;
        }
        
        .fa-bold {
            color: #795548;
        }
        
        .fa-italic {
            color: #607D8B;
        }
        
        .fa-underline {
            color: #3F51B5;
        }
        
        .fa-strikethrough {
            color: #9E9E9E;
        }
        
        .fa-align-left, .fa-align-center, .fa-align-right, .fa-align-justify {
            color: #00BCD4;
        }
        
        .fa-text-height {
            color: #8BC34A;
        }
        
        .fa-palette {
            color: #CDDC39;
        }
        
        .fa-download {
            color: #4CAF50;
        }
        
        .fa-share-alt {
            color: #2196F3;
        }
        
        .color-picker {
            width: 20px;
            height: 20px;
            padding: 0;
            border: none;
            cursor: pointer;
        }
        
        .font-size-select {
            width: 60px;
        }
        
        .font-family-select {
            width: 160px; /* Increased from 120px */
        }
        
        .dropdown-menu {
            padding: 10px;
        }
        
        .dropdown-item {
            cursor: pointer;
        }
        
        .theme-option {
            width: 30px;
            height: 30px;
            cursor: pointer;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            margin: 0;
            padding: 0;
        }
        
        .print-preview {
            max-width: 100%;
            border: 1px solid #dee2e6;
            padding: 20px;
            min-height: 300px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* Action buttons */
        .action-buttons {
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }

        /* Themes */
        .editor.light-theme {
            background-color: #ffffff;
            color: #333;
        }

        .editor.dark-theme {
            background-color: #2d2d2d;
            color: #f8f8f2;
        }

        .editor.blue-theme {
            background-color: #e8f4f8;
            color: #333;
        }

        .editor.green-theme {
            background-color: #e8f8e8;
            color: #333;
        }

        .editor.sepia-theme {
            background-color: #f8f4e8;
            color: #5b4636;
        }

        /* Share Modal */
        .share-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .share-options .btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .share-link-container {
            display: flex;
            margin: 15px 0;
        }

        .share-link-container input {
            flex-grow: 1;
            border-radius: 4px 0 0 4px;
        }

        .share-link-container button {
            border-radius: 0 4px 4px 0;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .toolbar {
                padding: 5px;
            }
            
            .toolbar .btn-group {
                margin-right: 5px;
                margin-bottom: 5px;
            }
            
            .toolbar .dropdown {
                margin-right: 5px;
            }
        }

        /* Print styles */
        @media print {
            .toolbar, .status-bar, .find-container, .action-buttons {
                display: none !important;
            }
            
            .editor-container {
                height: auto;
                border: none;
            }
            
            .editor {
                padding: 0;
                overflow: visible;
            }
        }

        .toolbar .btn-group .btn.active {
            background-color: rgba(0, 123, 255, 0.15);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .toolbar .dropdown {
            display: inline-block;
            margin-right: 10px;
            margin-bottom: 5px;
        }
        
        /* Improved dropdown styling */
        .dropdown-menu {
            padding: 10px;
            border-radius: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .dropdown-item {
            cursor: pointer;
            border-radius: 4px;
            padding: 6px 12px;
            margin-bottom: 2px;
        }
        
        .dropdown-item:hover {
            background-color: rgba(0, 123, 255, 0.1);
        }

        /* Tooltips */
        .tooltip {
            font-size: 12px;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
            transition: opacity 0.2s ease;
        }
        
        .tooltip.show {
            opacity: 1;
        }
        
        .tooltip.fade {
            transition: opacity 0.15s linear;
        }
        
        /* Hide tooltips when they lose focus */
        .tooltip:not(.show) {
            display: none !important;
            visibility: hidden !important;
        }
        
        /* Fix for tooltip positioning */
        .tooltip[data-popper-placement] {
            position: absolute !important;
        }
        
        .tooltip .keyboard-shortcut {
            display: inline-block;
            background-color: #f1f1f1;
            padding: 1px 4px;
            border-radius: 3px;
            margin-left: 4px;
            font-family: monospace;
            font-size: 11px;
        }

        /* Style for appearance section with inline items */
        .appearance-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .appearance-item {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 4px 8px;
            margin: 2px;
            height: 30px;
        }
        
        .appearance-item .item-label {
            font-size: 12px;
            margin-right: 6px;
            color: #495057;
        }
        
        .appearance-item i {
            margin-right: 6px;
            color: #495057;
        }

        .appearance-item select {
            color: #212529;
            font-size: 12px;
            padding: 2px 6px;
            margin: 0;
            cursor: pointer;
            border: none;
            background: transparent;
            outline: none;
            height: auto;
        }
        
        .appearance-item input {
            border: none;
            background: transparent;
            outline: none;
            margin: 0;
            padding: 0;
            height: auto;
        }
        
        .appearance-item .color-picker {
            width: 18px;
            height: 18px;
            padding: 0;
            border: 1px solid #dee2e6;
            border-radius: 3px;
            cursor: pointer;
        }

        .appearance-button {
            padding: 2px 6px;
            margin: 0;
            font-size: 12px;
            height: auto;
        }
        
        .appearance-item select,
        .appearance-item .btn-sm,
        .appearance-item .form-select {
            width: auto;
            padding: 2px 6px;
            margin: 0;
            font-size: 12px;
            height: auto;
        }
        
        .font-family-select {
            width: 160px; /* Increased from 120px */
        }
        
        .font-size-select {
            width: 60px;
        }
        
        .theme-select {
            width: 80px;
        }

        .spacing-select {
            width: 80px;
            text-align: left;
            background-color: transparent;
            border: none;
            padding: 2px 6px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .spacing-select:focus,
        .spacing-select:active {
            box-shadow: none !important;
            background-color: transparent !important;
            border: none !important;
        }
        
        .line-spacing-menu {
            min-width: 120px;
            margin-top: 2px !important;
        }
        
        /* Autosave notification */
        .autosave-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(52, 168, 83, 0.9);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 9999;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .autosave-notification i {
            font-size: 16px;
        }
        
        /* Saved Notes Styling */
        .saved-note-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            margin-bottom: 5px;
            transition: background-color 0.2s ease;
        }
        
        .saved-note-item:hover {
            background-color: #f8f9fa;
        }
        
        .saved-note-item.selected {
            background-color: rgba(0, 123, 255, 0.05);
            border-left: 3px solid #007bff;
        }
        
        .saved-note-item .form-check {
            margin-bottom: 0;
            min-width: 20px;
        }
        
        .saved-note-item .note-checkbox {
            cursor: pointer;
        }
        
        .saved-note-item .note-title {
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .saved-note-item .note-actions {
            display: flex;
            gap: 5px;
        }
        
        #delete-selected-notes {
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(10px);
        }
        
        #delete-selected-notes[style*="display: block"] {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Select all checkbox styling */
        #select-all-notes {
            cursor: pointer;
        }
        
        .notes-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .note-empty-state {
            text-align: center;
            padding: 20px;
            color: #6c757d;
        }

        /* Fix for button icons - completely override any conflicting styles */
        #download-btn i, #share-btn i {
            display: inline-block !important;
            width: auto !important;
            height: auto !important;
            font-size: 18px !important;
            margin-right: 10px !important;
            vertical-align: middle !important;
            position: relative !important;
            opacity: 1 !important;
            visibility: visible !important;
            color: inherit !important;
        }
        
        /* Reset button styles to ensure proper rendering */
        #download-btn, #share-btn {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            padding: 10px 20px !important;
            line-height: normal !important;
            position: relative !important;
        }
        
        /* Icon-specific overrides */
        #download-btn i.fas.fa-download, 
        #share-btn i.fas.fa-share-alt {
            font-family: "Font Awesome 6 Free" !important;
            font-weight: 900 !important;
        }

        /* Add space between buttons */
        .btn-group.d-flex.gap-2 .btn {
            margin: 0 5px;
            border-radius: 4px;
        }
        
        .btn-group.d-flex.gap-2 {
            gap: 15px !important;
        }

        /* Action buttons container */
        .action-buttons-container {
            margin: 15px 0;
            gap: 20px;
        }
        
        .action-buttons-container .btn {
            padding: 10px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Button content styling */
        .button-content {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            width: 100% !important;
        }
        
        .button-content i {
            margin-right: 10px !important;
        }
        
        /* Header styling */
        .site-header {
            background-color: #2c3e50;
            padding: 15px 0;
            color: #fff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .site-header .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .site-logo {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .site-logo i {
            margin-right: 10px;
            color: #3498db;
        }
        
        .site-logo:hover {
            color: #ecf0f1;
        }
        
        .main-nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .main-nav li {
            margin-left: 20px;
        }
        
        .main-nav a {
            color: #ecf0f1;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: color 0.2s;
            padding: 8px 12px;
            border-radius: 4px;
        }
        
        .main-nav a:hover, .main-nav a.active {
            color: #3498db;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Mobile menu */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }
        
        /* Footer styling */
        .site-footer {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 40px 0 20px;
            margin-top: 60px;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
            margin-bottom: 30px;
            padding: 0 15px;
        }
        
        .footer-section h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #3498db;
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ecf0f1;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .footer-links a:hover {
            color: #3498db;
        }
        
        .footer-social {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .footer-social a {
            color: #ecf0f1;
            font-size: 20px;
            transition: color 0.2s;
        }
        
        .footer-social a:hover {
            color: #3498db;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
            font-size: 14px;
        }
        
        /* Improved responsive adjustments */
        @media (max-width: 992px) {
            .footer-section {
                min-width: 200px;
                flex-basis: 50%;
            }
            
            /* Fix for desktop mode on mobile */
            .toolbar {
                flex-wrap: wrap;
                padding: 10px 5px;
            }
            
            .toolbar-group {
                min-width: auto;
                max-width: 100%;
                margin: 5px 2px;
            }
            
            .toolbar .btn-group .btn {
                padding: 5px 8px;
                min-width: 32px;
                font-size: 14px;
            }
            
            .toolbar .btn i {
                font-size: 14px;
                width: 14px;
                height: 14px;
            }
        }
        
        @media (max-width: 768px) {
            .site-header .container {
                flex-direction: row;
                flex-wrap: wrap;
                padding: 0 15px;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .main-nav {
                flex-basis: 100%;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
                width: 100%;
                margin-top: 15px;
            }
            
            .main-nav.active {
                max-height: 300px;
            }
            
            .main-nav ul {
                flex-direction: column;
                width: 100%;
            }
            
            .main-nav li {
                margin: 0;
                text-align: center;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            
            .main-nav a {
                display: block;
                padding: 12px;
            }
            
            .footer-content {
                flex-direction: column;
            }
            
            .footer-section {
                flex-basis: 100%;
                text-align: center;
            }
            
            .footer-social {
                justify-content: center;
            }
            
            /* Additional fixes for desktop mode */
            .notepad-container {
                width: 100%;
                max-width: none;
                overflow-x: hidden;
            }
            
            .notepad-main-container {
                border-radius: 4px;
            }
            
            .editor-container {
                height: 400px; /* Smaller height on mobile */
            }
            
            .appearance-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .appearance-item {
                width: 100%;
                margin: 3px 0;
            }
            
            /* Ensure UI elements don't overflow on narrow screens */
            .action-buttons-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons-container .btn {
                margin: 5px 0;
                width: 100%;
            }
            
            /* Fix for zoomed desktop view */
            .toolbar-group .btn-group .btn {
                min-width: 28px;
                padding: 4px 6px;
            }
        }
        
        @media (max-width: 576px) {
            .site-header {
                padding: 10px 0;
            }
            
            .site-logo {
                font-size: 20px;
            }
            
            .site-logo i {
                font-size: 18px;
            }
            
            .footer-section h3 {
                font-size: 16px;
            }
            
            .footer-links li, .footer-section p {
                font-size: 14px;
            }
            
            .footer-bottom p {
                font-size: 12px;
            }
            
            /* Even more aggressive fixes for very small screens or when zoomed */
            .toolbar-group-label {
                font-size: 9px;
            }
            
            .toolbar-group {
                padding: 5px 3px;
                min-width: auto;
            }
            
            .toolbar .btn-group .btn {
                margin: 0 1px;
                min-width: 26px;
                padding: 4px;
            }
            
            .toolbar .btn i {
                font-size: 12px;
                width: 12px;
                height: 12px;
            }
            
            /* Fix find container positioning */
            .find-container {
                top: 5px;
                right: 5px;
                width: 90%;
            }
        }
        
        /* Special fix for desktop view on mobile */
        @media screen and (min-width: 1000px) and (max-width: 1100px) and (orientation: landscape) {
            body {
                -webkit-text-size-adjust: none;
                text-size-adjust: none;
            }
            
            .container {
                max-width: 98%;
            }
            
            .toolbar-group {
                min-width: auto;
                margin: 0 2px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="site-header">
        <div class="container">
            <a href="index.html" class="site-logo">
                <i class="fas fa-edit"></i>Online Notepad
            </a>
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="main-nav" id="main-nav">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about-us.html">About</a></li>
                    <li><a href="contact-us.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="tool-container">
                    <h1 class="text-center mb-4">Notepad Tool</h1>
                    <p class="text-center mb-4">Create, edit, format and save your notes and documents with this feature-rich notepad.</p>
                    
                    <!-- Advertisement Banner -->
                    <div class="ad-banner mb-4 text-center">
                        <div class="card">
                            <div class="card-body">
                                <p class="mb-0">Advertisement Space</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tool Content -->
                    <div class="notepad-container position-relative">
                        <div class="notepad-main-container">
                        <!-- File Operations Toolbar -->
                        <div class="toolbar d-flex flex-wrap pb-2 mb-2">
                            <div class="toolbar-group">
                                <div class="toolbar-group-label">File</div>
                                <div class="btn-group me-0">
                                    <button id="new-btn" class="btn btn-outline-secondary btn-sm" title="New Document (Ctrl+N)">
                                        <i class="fas fa-file"></i>
                                    </button>
                                    <button id="open-btn" class="btn btn-outline-secondary btn-sm" title="Open File (Ctrl+O)">
                                        <i class="fas fa-folder-open"></i>
                                    </button>
                                    <input type="file" id="file-input" accept=".txt,.html,.md,.rtf" class="d-none">
                                    <button id="save-btn" class="btn btn-outline-secondary btn-sm" title="Save (Ctrl+S)">
                                        <i class="fas fa-save"></i>
                                    </button>
                                    <button id="print-btn" class="btn btn-outline-secondary btn-sm" title="Print (Ctrl+P)">
                                        <i class="fas fa-print"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Edit Operations -->
                            <div class="toolbar-group">
                                <div class="toolbar-group-label">Edit</div>
                                <div class="btn-group me-0">
                                    <button id="undo-btn" class="btn btn-outline-secondary btn-sm" title="Undo (Ctrl+Z)">
                                        <i class="fas fa-undo"></i>
                                    </button>
                                    <button id="redo-btn" class="btn btn-outline-secondary btn-sm" title="Redo (Ctrl+Y)">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                    <button id="cut-btn" class="btn btn-outline-secondary btn-sm" title="Cut (Ctrl+X)">
                                        <i class="fas fa-cut"></i>
                                    </button>
                                    <button id="copy-btn" class="btn btn-outline-secondary btn-sm" title="Copy (Ctrl+C)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <button id="paste-btn" class="btn btn-outline-secondary btn-sm" title="Paste (Ctrl+V)">
                                        <i class="fas fa-paste"></i>
                                    </button>
                                        <button id="find-replace-btn" class="btn btn-outline-secondary btn-sm" title="Find & Replace (Ctrl+F)">
                                            <i class="fas fa-search-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Text Formatting -->
                            <div class="toolbar-group">
                                <div class="toolbar-group-label">Format</div>
                                <div class="btn-group me-0">
                                    <button id="bold-btn" class="btn btn-outline-secondary btn-sm" title="Bold (Ctrl+B)">
                                        <i class="fas fa-bold"></i>
                                    </button>
                                    <button id="italic-btn" class="btn btn-outline-secondary btn-sm" title="Italic (Ctrl+I)">
                                        <i class="fas fa-italic"></i>
                                    </button>
                                    <button id="underline-btn" class="btn btn-outline-secondary btn-sm" title="Underline (Ctrl+U)">
                                        <i class="fas fa-underline"></i>
                                    </button>
                                    <button id="strikethrough-btn" class="btn btn-outline-secondary btn-sm" title="Strikethrough (Ctrl+Shift+S)">
                                        <i class="fas fa-strikethrough"></i>
                                    </button>
                                        <button id="clear-format-btn" class="btn btn-outline-secondary btn-sm" title="Clear Formatting (Ctrl+Space)">
                                            <i class="fas fa-eraser"></i>
                                        </button>
                                </div>
                            </div>
                            
                            <!-- Text Alignment -->
                            <div class="toolbar-group">
                                <div class="toolbar-group-label">Align</div>
                                <div class="btn-group me-0">
                                    <button id="align-left-btn" class="btn btn-outline-secondary btn-sm" title="Align Left (Ctrl+Shift+L)">
                                        <i class="fas fa-align-left"></i>
                                    </button>
                                    <button id="align-center-btn" class="btn btn-outline-secondary btn-sm" title="Align Center (Ctrl+Shift+E)">
                                        <i class="fas fa-align-center"></i>
                                    </button>
                                    <button id="align-right-btn" class="btn btn-outline-secondary btn-sm" title="Align Right (Ctrl+Shift+R)">
                                        <i class="fas fa-align-right"></i>
                                    </button>
                                    <button id="align-justify-btn" class="btn btn-outline-secondary btn-sm" title="Justify (Ctrl+Shift+J)">
                                        <i class="fas fa-align-justify"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Color and Font Controls -->
                            <div class="toolbar-group">
                                <div class="toolbar-group-label">Appearance</div>
                                <div class="appearance-container">
                                    <div class="appearance-item">
                                        <i class="fas fa-font"></i>
                                        <span class="item-label">Font:</span>
                                        <select id="font-family" class="form-select font-family-select">
                                            <option value="Arial, sans-serif">Arial</option>
                                            <option value="'Times New Roman', serif">Times New Roman</option>
                                            <option value="'Courier New', monospace">Courier New</option>
                                            <option value="Georgia, serif">Georgia</option>
                                            <option value="Verdana, sans-serif">Verdana</option>
                                            <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                                            <option value="Impact, sans-serif">Impact</option>
                                            <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                                                <option value="'Segoe UI', sans-serif">Segoe UI</option>
                                                <option value="'Roboto', sans-serif">Roboto</option>
                                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                                <option value="'Lato', sans-serif">Lato</option>
                                                <option value="'Montserrat', sans-serif">Montserrat</option>
                                                <option value="'Poppins', sans-serif">Poppins</option>
                                                <option value="'Playfair Display', serif">Playfair Display</option>
                                                <option value="'Merriweather', serif">Merriweather</option>
                                                <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                                                <option value="'Raleway', sans-serif">Raleway</option>
                                                <option value="'Ubuntu', sans-serif">Ubuntu</option>
                                                <option value="'PT Sans', sans-serif">PT Sans</option>
                                        </select>
                                    </div>
                                    
                                    <div class="appearance-item">
                                        <i class="fas fa-text-height"></i>
                                        <span class="item-label">Size:</span>
                                        <select id="font-size" class="font-size-select">
                                            <option value="1">8pt</option>
                                            <option value="2">10pt</option>
                                            <option value="3">12pt</option>
                                            <option value="4" selected>14pt</option>
                                            <option value="5">18pt</option>
                                            <option value="6">24pt</option>
                                            <option value="7">36pt</option>
                                                <option value="8">48pt</option>
                                                <option value="9">60pt</option>
                                                <option value="10">72pt</option>
                                        </select>
                                    </div>
                                    
                                    <div class="appearance-item">
                                        <i class="fas fa-font"></i>
                                        <span class="item-label">Color:</span>
                                        <input type="color" id="text-color" class="color-picker" value="#000000">
                                    </div>
                                    
                                    <div class="appearance-item">
                                        <i class="fas fa-highlighter"></i>
                                        <span class="item-label">Highlight:</span>
                                        <input type="color" id="highlight-color" class="color-picker" value="#ffff00">
                                    </div>
                                
                                    <div class="appearance-item">
                                        <i class="fas fa-arrows-alt-v"></i>
                                        <span class="item-label">Spacing:</span>
                                        <div class="dropdown">
                                            <button type="button" class="btn btn-outline-secondary btn-sm dropdown-toggle appearance-button spacing-select" data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                                1.0
                                            </button>
                                            <ul class="dropdown-menu line-spacing-menu" data-bs-popper="none">
                                                <li><h6 class="dropdown-header">Line Spacing</h6></li>
                                                <li><a class="dropdown-item" href="#" data-spacing="1">Single</a></li>
                                                <li><a class="dropdown-item" href="#" data-spacing="1.5">1.5</a></li>
                                                <li><a class="dropdown-item" href="#" data-spacing="2">Double</a></li>
                                                <li><a class="dropdown-item" href="#" data-spacing="2.5">2.5</a></li>
                                                <li><a class="dropdown-item" href="#" data-spacing="3">Triple</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="appearance-item">
                                        <i class="fas fa-palette"></i>
                                        <span class="item-label">Theme:</span>
                                        <select id="editor-theme" class="form-select theme-select">
                                            <option value="light">Light</option>
                                            <option value="dark">Dark</option>
                                            <option value="blue">Blue</option>
                                            <option value="green">Green</option>
                                            <option value="sepia">Sepia</option>
                                            <option value="red">Red</option>
                                            <option value="beige">Beige</option>
                                            <option value="lavender">Lavender</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Editor Container -->
                        <div class="editor-container mb-3">
                            <div id="editor" class="editor" contenteditable="true">
                                <p>Welcome to the Notepad Tool. Start typing here or use the toolbar to format your text.</p>
                            </div>
                        </div>
                        
                        <!-- Status Bar -->
                        <div class="status-bar mb-3">
                            <div id="word-count">Words: 0</div>
                            <div id="char-count">Characters: 0</div>
                            <div id="cursor-position">Line: 1, Column: 1</div>
                        </div>
                        
                        <!-- Find Container -->
                        <div id="find-container" class="find-container">
                            <div class="find-header mb-2">
                                    <h5><i class="fas fa-search-plus me-2"></i>Find & Replace</h5>
                                <button id="close-find-btn" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <div class="mb-2">
                                <label for="find-text" class="form-label small mb-1">Find:</label>
                                <div class="input-group input-group-sm mb-2">
                                    <input type="text" id="find-text" class="form-control" placeholder="Text to find...">
                                    <button id="find-prev-btn" class="btn btn-outline-secondary" title="Find Previous (Shift+F3)">
                                        <i class="fas fa-chevron-up"></i>
                                    </button>
                                    <button id="find-next-btn" class="btn btn-outline-secondary" title="Find Next (F3)">
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-2">
                                <label for="replace-text" class="form-label small mb-1">Replace with:</label>
                                <div class="input-group input-group-sm mb-2">
                                    <input type="text" id="replace-text" class="form-control" placeholder="Replacement text...">
                                    <button id="replace-btn" class="btn btn-outline-secondary" title="Replace Current (Ctrl+H)">
                                        <i class="fas fa-exchange-alt"></i>
                                    </button>
                                    <button id="replace-all-btn" class="btn btn-outline-secondary" title="Replace All (Ctrl+Alt+H)">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="d-flex gap-3 mb-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="match-case">
                                    <label class="form-check-label" for="match-case">Match case</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="whole-word">
                                    <label class="form-check-label" for="whole-word">Whole word</label>
                                </div>
                            </div>
                            
                            <div id="find-results" class="small text-muted mt-2"></div>
                        </div>
                        
                        <!-- Share Container -->
                            <div class="d-flex justify-content-between mb-3 action-buttons-container">
                                <button id="download-btn" class="btn btn-success flex-grow-1 me-3" title="Download Document (Ctrl+D)">
                                    <span class="button-content"><i class="fa-solid fas fa-download"></i> Download Document</span>
                            </button>
                                <button id="share-btn" class="btn btn-primary flex-grow-1" title="Share Document (Ctrl+Shift+S)">
                                    <span class="button-content"><i class="fa-solid fas fa-share-alt"></i> Share</span>
                            </button>
                        </div>

                        <!-- Saved Notes Section -->
                            <div class="saved-notes-section">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="fas fa-bookmark me-2 text-primary"></i>Saved Notes</h5>
                                <button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#savedNotesCollapse" aria-expanded="true" aria-controls="savedNotesCollapse">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="collapse show" id="savedNotesCollapse">
                                <div class="card-body">
                                    <div class="input-group mb-3">
                                        <input type="text" id="note-name" class="form-control" placeholder="Enter a name for your note">
                                        <button id="save-note-btn" class="btn btn-primary" title="Save Note (Ctrl+S)">
                                            <i class="fas fa-save me-1"></i> Save Note
                                        </button>
                                    </div>
                                    <hr>
                                    <div id="saved-notes-container" class="saved-notes-list">
                                        <!-- Saved notes will be loaded here dynamically -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Share Modal -->
                        <div class="modal fade" id="shareModal" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Share Document</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="form-group mb-3">
                                            <label for="share-link" class="form-label">Document Link</label>
                                            <div class="input-group">
                                                <input type="text" id="share-link" class="form-control" readonly>
                                                <button id="copy-link-btn" class="btn btn-outline-secondary" title="Copy Link (Ctrl+C)">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <small class="form-text text-muted">This link will work for 7 days.</small>
                                        </div>
                                        <div class="d-flex justify-content-center">
                                            <button class="btn btn-outline-primary me-2 share-btn" data-platform="facebook">
                                                <i class="fab fa-facebook-f"></i>
                                            </button>
                                            <button class="btn btn-outline-info me-2 share-btn" data-platform="twitter">
                                                <i class="fab fa-twitter"></i>
                                            </button>
                                            <button class="btn btn-outline-success me-2 share-btn" data-platform="whatsapp">
                                                <i class="fab fa-whatsapp"></i>
                                            </button>
                                            <button class="btn btn-outline-primary me-2 share-btn" data-platform="linkedin">
                                                <i class="fab fa-linkedin-in"></i>
                                            </button>
                                            <button class="btn btn-outline-danger share-btn" data-platform="email">
                                                <i class="fas fa-envelope"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Print Modal -->
                        <div class="modal fade" id="printModal" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Print Preview</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="print-preview mb-3" id="print-preview"></div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn btn-primary" id="confirm-print-btn">Print</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- About Section -->
                <div class="card mt-5">
                    <div class="card-body">
                        <h3 class="mb-4 text-center">About Notepad Tool</h3>
                        <p>Notepad Tool is a feature-rich text editor that runs entirely in your browser. Create, edit, format, and save your notes, documents, or code snippets with ease. Whether you need a simple notepad for jotting down ideas or a more advanced text editor for creating formatted documents, Notepad Tool has you covered.</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h5><i class="fas fa-shield-alt text-primary me-2"></i>Privacy Focused</h5>
                                <p>All text processing happens locally in your browser - your documents never leave your device unless you choose to share them.</p>
                            </div>
                            <div class="col-md-6">
                                <h5><i class="fas fa-sliders-h text-primary me-2"></i>Feature Rich</h5>
                                <p>Robust formatting options, file operations, find/replace functionality, and multiple themes to suit your preferences.</p>
                            </div>
                            <div class="col-md-6 mt-3">
                                <h5><i class="fas fa-file-alt text-primary me-2"></i>Multiple Export Options</h5>
                                <p>Save your documents in various formats including TXT, HTML, and more for maximum compatibility.</p>
                            </div>
                            <div class="col-md-6 mt-3">
                                <h5><i class="fas fa-share-alt text-primary me-2"></i>Easy Sharing</h5>
                                <p>Share your documents via link or social media platforms with just a few clicks.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- How it works section -->
                <div class="card mt-5">
                    <div class="card-body">
                        <h3 class="text-center">How to Use Notepad Tool</h3>
                        <div class="row mt-4">
                            <div class="col-md-3 text-center mb-3">
                                <div class="rounded-circle bg-light d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                                    <i class="fas fa-pen fa-2x text-primary"></i>
                                </div>
                                <h5>Create</h5>
                                <p class="text-muted">Type or paste your content in the editor area</p>
                            </div>
                            <div class="col-md-3 text-center mb-3">
                                <div class="rounded-circle bg-light d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                                    <i class="fas fa-paint-brush fa-2x text-primary"></i>
                                </div>
                                <h5>Format</h5>
                                <p class="text-muted">Use the toolbar to style your text</p>
                            </div>
                            <div class="col-md-3 text-center mb-3">
                                <div class="rounded-circle bg-light d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                                    <i class="fas fa-save fa-2x text-primary"></i>
                                </div>
                                <h5>Save</h5>
                                <p class="text-muted">Download your document or print it</p>
                            </div>
                            <div class="col-md-3 text-center mb-3">
                                <div class="rounded-circle bg-light d-inline-flex align-items-center justify-content-center mb-3" style="width: 80px; height: 80px;">
                                    <i class="fas fa-share-alt fa-2x text-primary"></i>
                                </div>
                                <h5>Share</h5>
                                <p class="text-muted">Share your document with others</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Features Section -->
                <div class="card mt-5">
                    <div class="card-body">
                        <h3 class="mb-4 text-center">Notepad Tool Features</h3>
                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-file-alt text-primary me-2"></i>Document Management</h5>
                                        <ul class="card-text">
                                            <li>Create new documents</li>
                                            <li>Open existing text files</li>
                                            <li>Save documents for future use</li>
                                            <li>Print documents directly from the browser</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-paint-brush text-primary me-2"></i>Formatting Options</h5>
                                        <ul class="card-text">
                                            <li>Text styling (bold, italic, underline)</li>
                                            <li>Font family and size selection</li>
                                            <li>Text and highlight color customization</li>
                                            <li>Paragraph alignment controls</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-search text-primary me-2"></i>Advanced Editing</h5>
                                        <ul class="card-text">
                                            <li>Undo/redo functionality</li>
                                            <li>Cut, copy, and paste support</li>
                                            <li>Find text functionality</li>
                                            <li>Word and character count</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-palette text-primary me-2"></i>Theme Options</h5>
                                        <ul class="card-text">
                                            <li>Light and dark themes</li>
                                            <li>Color-based themes (blue, green, sepia)</li>
                                            <li>Custom background and text colors</li>
                                            <li>Adjustable line spacing</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-share-alt text-primary me-2"></i>Sharing & Export</h5>
                                        <ul class="card-text">
                                            <li>Download in multiple formats</li>
                                            <li>Share via social media platforms</li>
                                            <li>Generate shareable links</li>
                                            <li>Email documents directly</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-4">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h5 class="card-title"><i class="fas fa-lock text-primary me-2"></i>Privacy & Security</h5>
                                        <ul class="card-text">
                                            <li>Browser-based processing</li>
                                            <li>No server uploads required</li>
                                            <li>Optional local storage</li>
                                            <li>End-to-end encryption for shared links</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Benefits of Notepad for PDF Files Section -->
                <div class="card mt-5">
                    <div class="card-body">
                        <h3 class="text-center mb-4">Benefits of Notepad for PDF Files</h3>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-file-pdf text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Easy Text Extraction</h5>
                                        <p>Copy text from PDF files and paste directly into our notepad for easy editing, reformatting, and organization.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-pen-fancy text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Annotation & Notes</h5>
                                        <p>Create detailed notes or annotations about your PDF documents in a separate, well-organized format.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-compress-arrows-alt text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Content Summarization</h5>
                                        <p>Extract key points from lengthy PDF documents and create concise summaries for easier reference.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-tasks text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Task List Creation</h5>
                                        <p>Convert information from PDF documents into actionable task lists, notes, or project plans.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-share-alt text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Simplified Sharing</h5>
                                        <p>Extract and share specific portions of PDF content without sending the entire document.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="d-flex">
                                    <div class="flex-shrink-0 me-3">
                                        <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                            <i class="fas fa-search text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <h5>Better Search Capabilities</h5>
                                        <p>Store searchable text from PDFs in a format that's easier to find and reference later.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frequently Asked Questions -->
                <div class="card mt-5">
                    <div class="card-body">
                        <h3 class="text-center mb-4">Frequently Asked Questions</h3>
                        
                        <div class="accordion" id="faqAccordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading1">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse1" aria-expanded="true" aria-controls="faqCollapse1">
                                        Is this notepad tool completely free to use?
                                    </button>
                                </h2>
                                <div id="faqCollapse1" class="accordion-collapse collapse show" aria-labelledby="faqHeading1" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Yes, our notepad tool is completely free to use. There are no hidden charges or subscription fees. You can use all the features without any limitations.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading2">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse2" aria-expanded="false" aria-controls="faqCollapse2">
                                        Is my data secure when using this tool?
                                    </button>
                                </h2>
                                <div id="faqCollapse2" class="accordion-collapse collapse" aria-labelledby="faqHeading2" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Absolutely! All your data remains on your device. We use browser's local storage to save your notes and preferences. Nothing is sent to our servers unless you explicitly use the sharing feature.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading3">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse3" aria-expanded="false" aria-controls="faqCollapse3">
                                        What file formats can I save my notes in?
                                    </button>
                                </h2>
                                <div id="faqCollapse3" class="accordion-collapse collapse" aria-labelledby="faqHeading3" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        You can download your notes in HTML format by default. This preserves all formatting. You can also save them as local notes within the application. Future updates will include more export formats like TXT, DOC, and PDF.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading4">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse4" aria-expanded="false" aria-controls="faqCollapse4">
                                        Can I use this tool offline?
                                    </button>
                                </h2>
                                <div id="faqCollapse4" class="accordion-collapse collapse" aria-labelledby="faqHeading4" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        Once the page is loaded, you can use most features without an internet connection. However, features like sharing and certain external fonts require an active internet connection.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading5">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse5" aria-expanded="false" aria-controls="faqCollapse5">
                                        How do I recover a note if I accidentally close my browser?
                                    </button>
                                </h2>
                                <div id="faqCollapse5" class="accordion-collapse collapse" aria-labelledby="faqHeading5" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        The notepad tool automatically saves your work every 30 seconds. When you return to the tool, it will attempt to restore your last session if it was closed less than an hour ago. For longer-term storage, we recommend using the "Save Note" feature.
                                    </div>
                                </div>
                            </div>
                            
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="faqHeading6">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapse6" aria-expanded="false" aria-controls="faqCollapse6">
                                        Is there a limit to how much text I can edit?
                                    </button>
                                </h2>
                                <div id="faqCollapse6" class="accordion-collapse collapse" aria-labelledby="faqHeading6" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        While there's no hard limit imposed by our tool, very large documents (over 100,000 characters) may cause performance issues depending on your device. For optimal performance with large documents, consider breaking them into smaller sections.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advertisement Banner -->
                <div class="ad-banner my-5 text-center">
                    <div class="card">
                        <div class="card-body">
                            <p class="mb-0">Advertisement Space</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Online Notepad</h3>
                    <p>Online Notepad provides a free, easy-to-use text editor right in your browser. Create, edit, and format text without installing any software.</p>
                    <div class="footer-social">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about-us.html">About Us</a></li>
                        <li><a href="contact-us.html">Contact Us</a></li>
                        <li><a href="privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="terms-of-service.html">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Features</h3>
                    <ul class="footer-links">
                        <li><a href="#">Text Formatting</a></li>
                        <li><a href="#">Find & Replace</a></li>
                        <li><a href="#">Auto-Save</a></li>
                        <li><a href="#">Download Options</a></li>
                        <li><a href="#">Keyboard Shortcuts</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-envelope me-2"></i> support@onlinenotepad.com</p>
                    <p><i class="fas fa-phone me-2"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-map-marker-alt me-2"></i> 123 Web Street, Digital City</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 Online Notepad. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/main.js"></script>
    <script>
        // Mobile menu toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mainNav = document.getElementById('main-nav');
            
            if (mobileMenuToggle && mainNav) {
                mobileMenuToggle.addEventListener('click', function() {
                    mainNav.classList.toggle('active');
                    const icon = this.querySelector('i');
                    if (icon) {
                        if (mainNav.classList.contains('active')) {
                            icon.classList.remove('fa-bars');
                            icon.classList.add('fa-times');
                        } else {
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    }
                });
            }
            
            // Rest of your existing script
    // DOM Elements
    const editor = document.getElementById('editor');
    const wordCount = document.getElementById('word-count');
    const charCount = document.getElementById('char-count');
    const cursorPosition = document.getElementById('cursor-position');
    const findContainer = document.getElementById('find-container');
    const findText = document.getElementById('find-text');
    const fileInput = document.getElementById('file-input');
    const printPreview = document.getElementById('print-preview');
    const shareLink = document.getElementById('share-link');
    const toolbarButtons = document.querySelectorAll('.toolbar .btn');
    const savedNotesContainer = document.getElementById('saved-notes-container');
    const saveNoteBtn = document.getElementById('save-note-btn');
    const noteNameInput = document.getElementById('note-name');
    
    // Initialize Bootstrap components
    const dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'));
    dropdownElementList.map(function (dropdownToggleEl) {
        return new bootstrap.Dropdown(dropdownToggleEl);
    });
    
    // Initialize Bootstrap tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl, {
            delay: { show: 500, hide: 100 },
            html: true,
            title: function() {
                const originalTitle = this.getAttribute('title');
                // Check if the title contains a keyboard shortcut in parentheses
                if(originalTitle.includes('(') && originalTitle.includes(')')) {
                    const parts = originalTitle.split('(');
                    const action = parts[0].trim();
                    const shortcut = parts[1].replace(')', '').trim();
                    return `${action} <span class="keyboard-shortcut">${shortcut}</span>`;
                }
                return originalTitle;
            }
        });
    });
    
    // Add tooltips to action buttons
    function initializeActionButtonTooltips() {
        // Main action buttons
        const actionButtons = [
            { id: 'new-btn', title: 'New Document (Ctrl+N)' },
            { id: 'open-btn', title: 'Open File (Ctrl+O)' },
            { id: 'save-btn', title: 'Save (Ctrl+S)' },
            { id: 'print-btn', title: 'Print (Ctrl+P)' },
            { id: 'download-btn', title: 'Download Document (Ctrl+D)' },
            { id: 'share-btn', title: 'Share Document (Ctrl+Shift+S)' },
            { id: 'save-note-btn', title: 'Save Note (Ctrl+S)' },
            { id: 'copy-link-btn', title: 'Copy Link (Ctrl+C)' },
            { id: 'find-replace-btn', title: 'Find & Replace (Ctrl+F)' },
            { id: 'find-next-btn', title: 'Find Next (F3)' },
            { id: 'find-prev-btn', title: 'Find Previous (Shift+F3)' },
            { id: 'replace-btn', title: 'Replace Current (Ctrl+H)' },
            { id: 'replace-all-btn', title: 'Replace All (Ctrl+Alt+H)' },
            { id: 'confirm-print-btn', title: 'Print Document' },
            { id: 'bold-btn', title: 'Bold (Ctrl+B)' },
            { id: 'italic-btn', title: 'Italic (Ctrl+I)' },
            { id: 'underline-btn', title: 'Underline (Ctrl+U)' },
            { id: 'strikethrough-btn', title: 'Strikethrough (Ctrl+Shift+S)' },
            { id: 'clear-format-btn', title: 'Clear Formatting (Ctrl+Space)' },
            { id: 'align-left-btn', title: 'Align Left (Ctrl+Shift+L)' },
            { id: 'align-center-btn', title: 'Align Center (Ctrl+Shift+E)' },
            { id: 'align-right-btn', title: 'Align Right (Ctrl+Shift+R)' },
            { id: 'align-justify-btn', title: 'Justify (Ctrl+Shift+J)' }
        ];
        
        actionButtons.forEach(button => {
            const element = document.getElementById(button.id);
            if (element) {
                element.setAttribute('title', button.title);
                element.setAttribute('data-bs-toggle', 'tooltip');
                element.setAttribute('data-bs-placement', 'top');
                new bootstrap.Tooltip(element);
            }
        });
        
        // Social sharing buttons
        document.querySelectorAll('.share-btn').forEach(btn => {
            const platform = btn.getAttribute('data-platform');
            if (platform) {
                const platformName = platform.charAt(0).toUpperCase() + platform.slice(1);
                btn.setAttribute('title', `Share on ${platformName}`);
                btn.setAttribute('data-bs-toggle', 'tooltip');
                btn.setAttribute('data-bs-placement', 'top');
                new bootstrap.Tooltip(btn);
            }
        });
    }
    
    // Add tooltips to all toolbar buttons that don't have them
    const toolbarIcons = document.querySelectorAll('.toolbar .btn:not([title]), .toolbar .btn i');
    toolbarIcons.forEach(icon => {
        // If the icon itself doesn't have a title but its parent button does, skip it
        if (icon.tagName === 'I' && icon.parentElement.hasAttribute('title')) {
            return;
        }
        
        // Determine the appropriate title based on button ID or class
        let tooltipTitle = '';
        const element = icon.tagName === 'I' ? icon.parentElement : icon;
        
        if (!element.hasAttribute('title')) {
            // Button IDs follow the pattern: action-btn
            if (element.id) {
                const action = element.id.replace('-btn', '');
                tooltipTitle = action.split('-')
                    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                    .join(' ');
            } 
            // For elements without IDs, try to determine from icon classes
            else if (icon.tagName === 'I') {
                const iconClasses = Array.from(icon.classList);
                for (const cls of iconClasses) {
                    if (cls.startsWith('fa-') && cls !== 'fa-solid' && cls !== 'fa-regular' && cls !== 'fa-light') {
                        tooltipTitle = cls.replace('fa-', '')
                            .split('-')
                            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                            .join(' ');
                        break;
                    }
                }
            }
            
            // If we found a title, add it as attribute
            if (tooltipTitle) {
                element.setAttribute('title', tooltipTitle);
                // Initialize tooltip for this element
                new bootstrap.Tooltip(element, {
                    delay: { show: 300, hide: 100 },
                    placement: 'bottom'
                });
            }
        }
    });
    
    // Initialize tooltips for line spacing options
    document.querySelectorAll('.line-spacing-menu .dropdown-item').forEach(item => {
        item.setAttribute('title', 'Set Line Spacing to ' + item.textContent.trim());
        new bootstrap.Tooltip(item, {
            delay: { show: 300, hide: 100 },
            placement: 'right'
        });
    });
    
    // Add tooltips to color pickers
    document.getElementById('text-color').setAttribute('title', 'Text Color');
    document.getElementById('highlight-color').setAttribute('title', 'Highlight Color');
    
    new bootstrap.Tooltip(document.getElementById('text-color'), {
        delay: { show: 300, hide: 100 },
        placement: 'bottom'
    });
    
    new bootstrap.Tooltip(document.getElementById('highlight-color'), {
        delay: { show: 300, hide: 100 },
        placement: 'bottom'
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Skip shortcuts if inside input fields other than the editor
        if (e.target.tagName === 'INPUT' || (e.target.tagName === 'TEXTAREA' && e.target !== editor)) return;
        
        // Control key combinations
        if (e.ctrlKey) {
            switch(e.key) {
                case 'b': // Bold
                    e.preventDefault();
                    document.getElementById('bold-btn').click();
                    break;
                case 'i': // Italic
                    e.preventDefault();
                    document.getElementById('italic-btn').click();
                    break;
                case 'u': // Underline
                    e.preventDefault();
                    document.getElementById('underline-btn').click();
                    break;
                case 'n': // New document
                    e.preventDefault();
                    document.getElementById('new-btn').click();
                    break;
                case 'o': // Open file
                    e.preventDefault();
                    document.getElementById('open-btn').click();
                    break;
                case 's': // Save
                    e.preventDefault();
                    document.getElementById('save-btn').click();
                    break;
                case 'p': // Print
                    e.preventDefault();
                    document.getElementById('print-btn').click();
                    break;
                case 'f': // Find
                    e.preventDefault();
                            document.getElementById('find-replace-btn').click();
                    break;
            }
        }
    });
    
    // Add active state toggle for toolbar buttons
    toolbarButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Skip for dropdown toggles which have their own behavior
            if (this.classList.contains('dropdown-toggle')) return;
            
            // Toggle active state for buttons like bold, italic, underline, etc.
            if (this.id === 'bold-btn' || this.id === 'italic-btn' || 
                this.id === 'underline-btn' || this.id === 'strikethrough-btn' ||
                this.id.startsWith('align-')) {
                this.classList.toggle('active');
                
                // Save formatting state for toggle buttons
                if (this.id === 'bold-btn') {
                    localStorage.setItem('notepad_bold', this.classList.contains('active'));
                } else if (this.id === 'italic-btn') {
                    localStorage.setItem('notepad_italic', this.classList.contains('active'));
                } else if (this.id === 'underline-btn') {
                    localStorage.setItem('notepad_underline', this.classList.contains('active'));
                } else if (this.id === 'strikethrough-btn') {
                    localStorage.setItem('notepad_strikethrough', this.classList.contains('active'));
                } else if (this.id.startsWith('align-')) {
                    localStorage.setItem('notepad_alignment', this.id);
                }
            } else {
                // For other buttons, just add a temporary active state
                this.classList.add('active');
                setTimeout(() => {
                    this.classList.remove('active');
                }, 200);
            }
        });
    });
    
    // Monitor document state to update toolbar button states
    editor.addEventListener('keyup', updateToolbarStates);
    editor.addEventListener('mouseup', updateToolbarStates);
    
    function updateToolbarStates() {
        document.getElementById('bold-btn').classList.toggle('active', document.queryCommandState('bold'));
        document.getElementById('italic-btn').classList.toggle('active', document.queryCommandState('italic'));
        document.getElementById('underline-btn').classList.toggle('active', document.queryCommandState('underline'));
        document.getElementById('strikethrough-btn').classList.toggle('active', document.queryCommandState('strikeThrough'));
        
        // Update alignment buttons
        document.getElementById('align-left-btn').classList.toggle('active', document.queryCommandState('justifyLeft'));
        document.getElementById('align-center-btn').classList.toggle('active', document.queryCommandState('justifyCenter'));
        document.getElementById('align-right-btn').classList.toggle('active', document.queryCommandState('justifyRight'));
        document.getElementById('align-justify-btn').classList.toggle('active', document.queryCommandState('justifyFull'));
    }
    
    // Initialize editor
    let currentFileName = 'Untitled Document';
    let currentDocumentContent = editor.innerHTML;
    let isModified = false;
    let currentTheme = 'light';
    let currentFontFamily = 'Arial, sans-serif';
    let currentFontSize = '4';
    let currentLineSpacing = '1';
    
    // Save formatting preferences
    function saveFormatPreferences() {
        const preferences = {
            theme: currentTheme,
            fontFamily: currentFontFamily,
            fontSize: currentFontSize,
            lineSpacing: currentLineSpacing,
            textColor: document.getElementById('text-color').value,
            highlightColor: document.getElementById('highlight-color').value
        };
        localStorage.setItem('notepad_format_preferences', JSON.stringify(preferences));
    }
    
    // Load formatting preferences
    function loadFormatPreferences() {
        const savedPreferences = localStorage.getItem('notepad_format_preferences');
        if (savedPreferences) {
            const preferences = JSON.parse(savedPreferences);
            
            // Apply theme
            if (preferences.theme) {
                currentTheme = preferences.theme;
                setTheme(currentTheme);
            }
            
            // Apply font family
            if (preferences.fontFamily) {
                currentFontFamily = preferences.fontFamily;
                const fontFamilySelect = document.getElementById('font-family');
                fontFamilySelect.value = currentFontFamily;
                editor.style.fontFamily = currentFontFamily;
            }
            
            // Apply font size
            if (preferences.fontSize) {
                currentFontSize = preferences.fontSize;
                const fontSizeSelect = document.getElementById('font-size');
                fontSizeSelect.value = currentFontSize;
                document.execCommand('fontSize', false, currentFontSize);
            }
            
            // Apply line spacing
            if (preferences.lineSpacing) {
                currentLineSpacing = preferences.lineSpacing;
                const spacingButton = document.querySelector('.spacing-select');
                spacingButton.textContent = currentLineSpacing;
                editor.style.lineHeight = currentLineSpacing;
            }
            
            // Apply text color
            if (preferences.textColor) {
                const colorPicker = document.getElementById('text-color');
                colorPicker.value = preferences.textColor;
                document.execCommand('foreColor', false, preferences.textColor);
            }
            
            // Apply highlight color
            if (preferences.highlightColor) {
                const highlightPicker = document.getElementById('highlight-color');
                highlightPicker.value = preferences.highlightColor;
            }
        }
        
        // Load text formatting states
        loadFormattingStates();
    }
    
    // Load formatting states from localStorage
    function loadFormattingStates() {
        // Apply bold if saved
        const savedBold = localStorage.getItem('notepad_bold');
        if (savedBold === 'true') {
            document.getElementById('bold-btn').classList.add('active');
            document.execCommand('bold');
        }
        
        // Apply italic if saved
        const savedItalic = localStorage.getItem('notepad_italic');
        if (savedItalic === 'true') {
            document.getElementById('italic-btn').classList.add('active');
            document.execCommand('italic');
        }
        
        // Apply underline if saved
        const savedUnderline = localStorage.getItem('notepad_underline');
        if (savedUnderline === 'true') {
            document.getElementById('underline-btn').classList.add('active');
            document.execCommand('underline');
        }
        
        // Apply strikethrough if saved
        const savedStrikethrough = localStorage.getItem('notepad_strikethrough');
        if (savedStrikethrough === 'true') {
            document.getElementById('strikethrough-btn').classList.add('active');
            document.execCommand('strikeThrough');
        }
        
        // Apply text alignment if saved
        const savedAlignment = localStorage.getItem('notepad_alignment');
        if (savedAlignment) {
            document.getElementById(savedAlignment).classList.add('active');
            switch (savedAlignment) {
                case 'align-left-btn':
                    document.execCommand('justifyLeft');
                    break;
                case 'align-center-btn':
                    document.execCommand('justifyCenter');
                    break;
                case 'align-right-btn':
                    document.execCommand('justifyRight');
                    break;
                case 'align-justify-btn':
                    document.execCommand('justifyFull');
                    break;
            }
        }
    }
    
    // Update status information
    function updateStatus() {
        const text = editor.textContent || '';
        const words = text.trim() ? text.trim().split(/\s+/).length : 0;
        const chars = text.length;
        
        wordCount.textContent = `Words: ${words}`;
        charCount.textContent = `Characters: ${chars}`;
        
        // Mark document as modified
        if (editor.innerHTML !== currentDocumentContent) {
            isModified = true;
        }
        
        // Update toolbar states
        updateToolbarStates();
    }
    
    // Setup editor event listeners
    editor.addEventListener('input', updateStatus);
    editor.addEventListener('keyup', updateStatus);
    editor.addEventListener('click', updateStatus);
    
    // Load saved notes from localStorage
    function loadSavedNotes() {
        const savedNotes = getSavedNotes();
        updateSavedNotesList(savedNotes);
    }
    
    // Save current note
    function saveCurrentNote() {
        const content = editor.innerHTML;
        const noteNameInput = document.getElementById('note-name');
        const title = noteNameInput.value.trim() || currentFileName || 'Untitled Document';
        const date = new Date().toISOString();
        const id = Date.now().toString();
        
        // Get existing notes
        const savedNotes = getSavedNotes();
        
        // Add new note
        savedNotes.push({
            id,
            title,
            content,
            date
        });
        
        // Save back to localStorage
        localStorage.setItem('saved_notes', JSON.stringify(savedNotes));
        
        // Update the notes list
        updateSavedNotesList(savedNotes);
        
        // Clear the note name input
        noteNameInput.value = '';
        
        // Show success message
        showNotification('Note saved successfully', 'success');
    }
    
    // Load a note
    function loadNote(noteId) {
        const savedNotes = getSavedNotes();
        const note = savedNotes.find(n => n.id === noteId);
        
        if (note) {
            // Check if current document has unsaved changes
            if (isModified) {
                if (!confirm('You have unsaved changes. Load saved note anyway?')) {
                    return;
                }
            }
            
            editor.innerHTML = note.content;
            currentFileName = note.title;
            currentDocumentContent = note.content;
            isModified = false;
            updateStatus();
            showNotification('Note loaded successfully', 'success');
        }
    }
    
    // Delete a note
    function deleteNote(noteId) {
        if (!confirm('Are you sure you want to delete this note? This action cannot be undone.')) {
            return;
        }
        
        // Clean up tooltips first
        cleanupTooltips();
        
        // First, find any tooltip elements that might be showing "Delete Note" text and remove them
        const tooltips = document.querySelectorAll('.tooltip');
        tooltips.forEach(tooltip => {
            if (tooltip.textContent && tooltip.textContent.toLowerCase().includes('delete')) {
                tooltip.remove();
            }
        });
        
        // Also disable any tooltip instances that might exist for delete buttons
        document.querySelectorAll('.btn-outline-danger').forEach(btn => {
            const tooltipInstance = bootstrap.Tooltip.getInstance(btn);
            if (tooltipInstance) {
                tooltipInstance.dispose();
            }
        });
        
        let savedNotes = getSavedNotes();
        savedNotes = savedNotes.filter(n => n.id !== noteId);
        localStorage.setItem('saved_notes', JSON.stringify(savedNotes));
        
        // Clear any "delete note" text that might be lingering
        document.title = "Notepad Tool"; // Reset document title
        
        // Make sure no lingering tooltips remain
        const allTooltips = document.querySelectorAll('.tooltip');
        allTooltips.forEach(tooltip => {
            const bsTooltip = bootstrap.Tooltip.getInstance(tooltip);
            if (bsTooltip) {
                bsTooltip.dispose();
            }
            tooltip.remove();
        });
        
        // Update the saved notes list
        updateSavedNotesList(savedNotes);
        
        // Show a success notification
        showNotification('Note deleted successfully', 'info');
    }
    
    // Get saved notes from localStorage
    function getSavedNotes() {
        return JSON.parse(localStorage.getItem('saved_notes') || '[]');
    }
    
    // Show notification
    function showNotification(message, type = 'info') {
        // Clean up any lingering tooltips first
        cleanupTooltips();
        
        // First remove any existing notifications to avoid overlaps or duplicates
        const existingNotifications = document.querySelectorAll('.notification');
        existingNotifications.forEach(notification => {
            notification.remove();
        });
        
        // Create new notification
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.textContent = message;
        notification.style.position = 'fixed';
        notification.style.bottom = '20px';
        notification.style.right = '20px';
        notification.style.backgroundColor = type === 'success' ? 'rgba(40, 167, 69, 0.9)' : 
                                             type === 'error' ? 'rgba(220, 53, 69, 0.9)' : 
                                             'rgba(23, 162, 184, 0.9)';
        notification.style.color = 'white';
        notification.style.padding = '10px 15px';
        notification.style.borderRadius = '4px';
        notification.style.zIndex = '9999';
        notification.style.transition = 'opacity 0.3s ease';
        notification.style.opacity = '0';
        
        document.body.appendChild(notification);
        
        // Show notification
        setTimeout(() => {
            notification.style.opacity = '1';
        }, 10);
        
        // Hide and remove notification
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                if (notification && notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }
    
    // Save Note Button Click Event
    saveNoteBtn.addEventListener('click', function() {
        const noteName = noteNameInput.value.trim();
        
        if (!noteName) {
            alert('Please enter a name for your note.');
            noteNameInput.focus();
            return;
        }
        
        // Check if note with same name exists
        const savedNotes = getSavedNotes();
        if (savedNotes.some(note => note.name === noteName)) {
            if (!confirm(`A note with the name "${noteName}" already exists. Do you want to overwrite it?`)) {
                return;
            }
        }
        
        saveCurrentNote();
    });
    
    // Autosave to local storage every 30 seconds
    setInterval(function() {
        if (isModified) {
            localStorage.setItem('notepad_autosave', editor.innerHTML);
            localStorage.setItem('notepad_autosave_time', new Date().toISOString());
            isModified = false;
            
            // Save current formatting state
            saveFormatPreferences();
            
            // Display a small notification
            showNotification('Autosaved');
        }
    }, 30000);
    
    // Check for autosaved content on load
    if (localStorage.getItem('notepad_autosave')) {
        const autosaveTime = new Date(localStorage.getItem('notepad_autosave_time'));
        const now = new Date();
        const timeDiff = Math.floor((now - autosaveTime) / (1000 * 60)); // Minutes
        
        if (timeDiff < 60) { // Only restore if less than 1 hour old
            editor.innerHTML = localStorage.getItem('notepad_autosave');
            currentDocumentContent = editor.innerHTML;
            updateStatus();
        }
    }
    
    // File Operations
    document.getElementById('new-btn').addEventListener('click', function() {
        if (isModified && confirm('You have unsaved changes. Are you sure you want to create a new document?')) {
            editor.innerHTML = '<p>Welcome to the Notepad Tool. Start typing here or use the toolbar to format your text.</p>';
            currentFileName = 'Untitled Document';
            currentDocumentContent = editor.innerHTML;
            isModified = false;
            updateStatus();
        } else if (!isModified) {
            editor.innerHTML = '<p>Welcome to the Notepad Tool. Start typing here or use the toolbar to format your text.</p>';
            currentFileName = 'Untitled Document';
            currentDocumentContent = editor.innerHTML;
            updateStatus();
        }
    });
    
    document.getElementById('open-btn').addEventListener('click', function() {
        fileInput.click();
    });
    
    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;
        
        currentFileName = file.name.split('.')[0] || 'Untitled Document';
        
        const reader = new FileReader();
        reader.onload = function(e) {
            const content = e.target.result;
            
            // Handle different file types
            if (file.type === 'text/plain') {
                editor.innerHTML = `<pre>${content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`;
            } else if (file.type === 'text/html') {
                // Sanitize HTML (basic)
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = content;
                editor.innerHTML = tempDiv.innerHTML;
            } else if (file.name.endsWith('.md')) {
                // Basic markdown to HTML (just for demonstration)
                let html = content
                    .replace(/# (.*?)$/gm, '<h1>$1</h1>')
                    .replace(/## (.*?)$/gm, '<h2>$1</h2>')
                    .replace(/### (.*?)$/gm, '<h3>$1</h3>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/\n/g, '<br>');
                editor.innerHTML = html;
            } else {
                editor.innerHTML = `<pre>${content.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`;
            }
            
            currentDocumentContent = editor.innerHTML;
            updateStatus();
        };
        
        if (file.type === 'text/plain' || file.type === 'text/html' || file.name.endsWith('.md')) {
            reader.readAsText(file);
        } else {
            alert('Unsupported file type. Please use .txt, .html, or .md files.');
        }
        
        // Reset file input
        fileInput.value = '';
    });
    
    document.getElementById('save-btn').addEventListener('click', function() {
        // Create a prompt for naming the note
        const noteName = prompt('Enter a name for your note:', currentFileName);
        if (noteName) {
            // Set the note name input value
            const noteNameInput = document.getElementById('note-name');
            noteNameInput.value = noteName;
            
            // Save the note to saved notes
            saveCurrentNote();
            
            // Update document title if needed
            if (currentFileName !== noteName) {
                currentFileName = noteName;
                updateStatus();
            }
        }
    });
    
    // Download functionality (separate from Save)
    document.getElementById('download-btn').addEventListener('click', function() {
        const content = editor.innerText; // Changed from innerHTML to innerText to get plain text
        const blob = new Blob([content], {type: 'text/plain'}); // Changed type from text/html to text/plain
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = currentFileName + '.txt'; // Changed extension from .html to .txt
        a.click();
        
        URL.revokeObjectURL(url);
        
        currentDocumentContent = editor.innerHTML; // Still track the full HTML content for modification tracking
        isModified = false;
        updateStatus();
    });
    
    // Print functionality
    document.getElementById('print-btn').addEventListener('click', function() {
        printPreview.innerHTML = editor.innerHTML;
        const myModal = new bootstrap.Modal(document.getElementById('printModal'));
        myModal.show();
    });
    
    document.getElementById('confirm-print-btn').addEventListener('click', function() {
        const printContents = printPreview.innerHTML;
        const originalContents = document.body.innerHTML;
        
        document.body.innerHTML = `
            <style>
                body { font-family: Arial, sans-serif; line-height: 1.5; }
                @media print {
                    @page { margin: 1cm; }
                }
            </style>
            <div class="print-only">${printContents}</div>
        `;
        
        window.print();
        document.body.innerHTML = originalContents;
        window.location.reload();
    });
    
    // Edit Operations
    document.getElementById('undo-btn').addEventListener('click', function() {
        document.execCommand('undo');
        updateStatus();
    });
    
    document.getElementById('redo-btn').addEventListener('click', function() {
        document.execCommand('redo');
        updateStatus();
    });
    
    document.getElementById('cut-btn').addEventListener('click', function() {
        document.execCommand('cut');
        updateStatus();
    });
    
    document.getElementById('copy-btn').addEventListener('click', function() {
        document.execCommand('copy');
    });
    
    document.getElementById('paste-btn').addEventListener('click', function() {
        document.execCommand('paste');
        updateStatus();
    });
    
    // Find functionality
            document.getElementById('find-replace-btn').addEventListener('click', function() {
        findContainer.style.display = 'block';
        findText.focus();
    });
    
    document.getElementById('close-find-btn').addEventListener('click', function() {
        findContainer.style.display = 'none';
        // Remove any existing highlights
        removeHighlights();
    });
    
    let findResults = [];
    let currentFindIndex = -1;
    
    function removeHighlights() {
        const highlighted = editor.querySelectorAll('mark');
        highlighted.forEach(el => {
            const text = el.textContent;
            const textNode = document.createTextNode(text);
            el.parentNode.replaceChild(textNode, el);
        });
        
        // Clear result count
        document.getElementById('find-results').textContent = '';
    }
    
    function highlightText(searchText, matchCase, wholeWord) {
        // Remove any existing highlights
        removeHighlights();
        
        if (!searchText) return;
        
        findResults = [];
        currentFindIndex = -1;
        
        const editorText = editor.innerHTML;
        const regexFlags = matchCase ? 'g' : 'gi';
        const searchTermRegex = wholeWord ? new RegExp(`\\b${escapeRegExp(searchText)}\\b`, regexFlags) : new RegExp(escapeRegExp(searchText), regexFlags);
        
        // Creating a temporary element to search through
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = editorText;
        
        function searchNode(node) {
            if (node.nodeType === 3) { // Text node
                const nodeText = node.nodeValue;
                const matches = nodeText.match(searchTermRegex);
                
                if (matches) {
                    const span = document.createElement('span');
                    let lastIndex = 0;
                    let match;
                    
                    searchTermRegex.lastIndex = 0; // Reset regex index
                    
                    while ((match = searchTermRegex.exec(nodeText)) !== null) {
                        const matchIndex = match.index;
                        const beforeMatch = nodeText.substring(lastIndex, matchIndex);
                        
                        if (beforeMatch) {
                            span.appendChild(document.createTextNode(beforeMatch));
                        }
                        
                        const mark = document.createElement('mark');
                        mark.textContent = match[0];
                        span.appendChild(mark);
                        findResults.push(mark);
                        
                        lastIndex = matchIndex + match[0].length;
                    }
                    
                    if (lastIndex < nodeText.length) {
                        span.appendChild(document.createTextNode(nodeText.substring(lastIndex)));
                    }
                    
                    node.parentNode.replaceChild(span, node);
                    return true;
                }
            } else if (node.nodeType === 1) { // Element node
                Array.from(node.childNodes).forEach(child => searchNode(child));
            }
            return false;
        }
        
        Array.from(tempDiv.childNodes).forEach(node => searchNode(node));
        editor.innerHTML = tempDiv.innerHTML;
        
        // Update results count
        const resultsEl = document.getElementById('find-results');
        if (findResults.length > 0) {
            resultsEl.textContent = `${findResults.length} matches found`;
            currentFindIndex = 0;
            findResults[currentFindIndex].classList.add('active-find');
            findResults[currentFindIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            resultsEl.textContent = 'No matches found';
        }
        
        return findResults.length;
    }
    
    // Escape special regex characters
    function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
    }
    
    document.getElementById('find-text').addEventListener('input', function() {
        const searchText = this.value;
        const matchCase = document.getElementById('match-case').checked;
        const wholeWord = document.getElementById('whole-word').checked;
        highlightText(searchText, matchCase, wholeWord);
    });
    
    document.getElementById('find-next-btn').addEventListener('click', function() {
        if (findResults.length === 0) return;
        
        if (currentFindIndex > -1) {
            findResults[currentFindIndex].classList.remove('active-find');
        }
        
        currentFindIndex = (currentFindIndex + 1) % findResults.length;
        findResults[currentFindIndex].classList.add('active-find');
        findResults[currentFindIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
    });
    
    document.getElementById('find-prev-btn').addEventListener('click', function() {
        if (findResults.length === 0) return;
        
        if (currentFindIndex > -1) {
            findResults[currentFindIndex].classList.remove('active-find');
        }
        
        currentFindIndex = (currentFindIndex - 1 + findResults.length) % findResults.length;
        findResults[currentFindIndex].classList.add('active-find');
        findResults[currentFindIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
    });
    
    document.getElementById('match-case').addEventListener('change', function() {
        const searchText = document.getElementById('find-text').value;
        const matchCase = this.checked;
        const wholeWord = document.getElementById('whole-word').checked;
        highlightText(searchText, matchCase, wholeWord);
    });
    
    document.getElementById('whole-word').addEventListener('change', function() {
        const searchText = document.getElementById('find-text').value;
        const matchCase = document.getElementById('match-case').checked;
        const wholeWord = this.checked;
        highlightText(searchText, matchCase, wholeWord);
    });
    
    // Replace functionality
    document.getElementById('replace-btn').addEventListener('click', function() {
        if (findResults.length === 0 || currentFindIndex === -1) return;
        
        const replaceText = document.getElementById('replace-text').value;
        replaceCurrentMatch(replaceText);
    });
    
    document.getElementById('replace-all-btn').addEventListener('click', function() {
        const searchText = document.getElementById('find-text').value;
        if (!searchText) return;
        
        const replaceText = document.getElementById('replace-text').value;
        const matchCase = document.getElementById('match-case').checked;
        const wholeWord = document.getElementById('whole-word').checked;
        
        replaceAllMatches(searchText, replaceText, matchCase, wholeWord);
    });
    
    function replaceCurrentMatch(replaceText) {
        if (findResults.length === 0 || currentFindIndex === -1) return;
        
        const currentMatch = findResults[currentFindIndex];
        
        // Create text node with replacement
        const textNode = document.createTextNode(replaceText);
        
        // Replace the current mark with the text node
        currentMatch.parentNode.replaceChild(textNode, currentMatch);
        
        // Re-run search to update highlighting and indices
        const searchText = document.getElementById('find-text').value;
        const matchCase = document.getElementById('match-case').checked;
        const wholeWord = document.getElementById('whole-word').checked;
        
        // Mark document as modified
        isModified = true;
        updateStatus();
        
        // Update current document content
        currentDocumentContent = editor.innerHTML;
        
        // Rehighlight text
        highlightText(searchText, matchCase, wholeWord);
    }
    
    function replaceAllMatches(searchText, replaceText, matchCase, wholeWord) {
        if (!searchText) return;
        
        const confirmation = confirm(`Replace all occurrences of "${searchText}" with "${replaceText}"?`);
        if (!confirmation) return;
        
        const regexFlags = matchCase ? 'g' : 'gi';
        const searchTermRegex = wholeWord ? new RegExp(`\\b${escapeRegExp(searchText)}\\b`, regexFlags) : new RegExp(escapeRegExp(searchText), regexFlags);
        
        // Get current HTML
        let content = editor.innerHTML;
        
        // Count matches before replacing
        const matches = content.match(searchTermRegex);
        const count = matches ? matches.length : 0;
        
        // Do the replacement
        content = content.replace(searchTermRegex, replaceText);
        
        // Update editor content
        editor.innerHTML = content;
        
        // Mark document as modified
        isModified = true;
        updateStatus();
        
        // Update current document content
        currentDocumentContent = editor.innerHTML;
        
        // Show message
        document.getElementById('find-results').textContent = `Replaced ${count} occurrences`;
        
        // Clear highlights
        removeHighlights();
        findResults = [];
        currentFindIndex = -1;
        
        showNotification(`Replaced ${count} occurrences`, 'success');
    }
    
    // Text Formatting
    document.getElementById('bold-btn').addEventListener('click', function() {
        document.execCommand('bold');
        localStorage.setItem('notepad_bold', document.queryCommandState('bold'));
        editor.focus();
    });
    
    document.getElementById('italic-btn').addEventListener('click', function() {
        document.execCommand('italic');
        localStorage.setItem('notepad_italic', document.queryCommandState('italic'));
        editor.focus();
    });
    
    document.getElementById('underline-btn').addEventListener('click', function() {
        document.execCommand('underline');
        localStorage.setItem('notepad_underline', document.queryCommandState('underline'));
        editor.focus();
    });
    
    document.getElementById('strikethrough-btn').addEventListener('click', function() {
        document.execCommand('strikeThrough');
        localStorage.setItem('notepad_strikethrough', document.queryCommandState('strikeThrough'));
        editor.focus();
    });
            
            // Clear Formatting
            document.getElementById('clear-format-btn').addEventListener('click', function() {
                // Get the selection
                const selection = window.getSelection();
                
                if (selection.rangeCount > 0) {
                    // Get the selected text
                    const range = selection.getRangeAt(0);
                    const selectedText = range.toString();
                    
                    if (selectedText) {
                        // Remove formatting by executing the removeFormat command
                        document.execCommand('removeFormat');
                        
                        // Reset font to default
                        document.execCommand('fontName', false, 'Arial, sans-serif');
                        
                        // Reset font size to default (size 3 = 12pt)
                        document.execCommand('fontSize', false, '3');
                        
                        // Reset text color to default
                        document.execCommand('foreColor', false, '#000000');
                        
                        // Reset text alignment to left
                        document.execCommand('justifyLeft');
                        
                        // Update all toolbar state
                        updateToolbarStates();
                        
                        // Show success message
                        showNotification('Formatting cleared', 'success');
                    } else {
                        showNotification('Select text to clear formatting', 'info');
                    }
                } else {
                    showNotification('Select text to clear formatting', 'info');
                }
                
                editor.focus();
            });
    
    // Text Alignment
    document.getElementById('align-left-btn').addEventListener('click', function() {
        document.execCommand('justifyLeft');
        localStorage.setItem('notepad_alignment', 'align-left-btn');
        editor.focus();
    });
    
    document.getElementById('align-center-btn').addEventListener('click', function() {
        document.execCommand('justifyCenter');
        localStorage.setItem('notepad_alignment', 'align-center-btn');
        editor.focus();
    });
    
    document.getElementById('align-right-btn').addEventListener('click', function() {
        document.execCommand('justifyRight');
        localStorage.setItem('notepad_alignment', 'align-right-btn');
        editor.focus();
    });
    
    document.getElementById('align-justify-btn').addEventListener('click', function() {
        document.execCommand('justifyFull');
        localStorage.setItem('notepad_alignment', 'align-justify-btn');
        editor.focus();
    });
    
    // Font Controls
    document.getElementById('font-family').addEventListener('change', function() {
        currentFontFamily = this.value;
        document.execCommand('fontName', false, this.value);
        saveFormatPreferences();
        editor.focus();
    });
    
    document.getElementById('font-size').addEventListener('change', function() {
        currentFontSize = this.value;
        document.execCommand('fontSize', false, this.value);
        saveFormatPreferences();
        editor.focus();
    });
    
    document.getElementById('text-color').addEventListener('input', function() {
        document.execCommand('foreColor', false, this.value);
        saveFormatPreferences();
        editor.focus();
    });
    
    document.getElementById('highlight-color').addEventListener('input', function() {
        document.execCommand('hiliteColor', false, this.value);
        saveFormatPreferences();
        editor.focus();
    });
    
    // Line Spacing
    document.querySelectorAll('.line-spacing-menu .dropdown-item').forEach(item => {
        item.addEventListener('click', function(e) {
            e.preventDefault(); // Prevent default link behavior
            const spacing = this.getAttribute('data-spacing');
            currentLineSpacing = spacing;
            
            // Update button text to show current spacing
            const spacingText = this.textContent;
            const dropdownToggle = this.closest('.dropdown').querySelector('.dropdown-toggle');
            dropdownToggle.textContent = spacing;
            
            // Close the dropdown
            const dropdownInstance = bootstrap.Dropdown.getInstance(dropdownToggle);
            if (dropdownInstance) {
                dropdownInstance.hide();
            }
            
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const selectedNodes = getSelectedNodes(range);
                
                selectedNodes.forEach(node => {
                    if (node.nodeType === 1) { // Element node
                        node.style.lineHeight = spacing;
                    } else if (node.nodeType === 3) { // Text node
                        const span = document.createElement('span');
                        span.style.lineHeight = spacing;
                        span.textContent = node.nodeValue;
                        node.parentNode.replaceChild(span, node);
                    }
                });
            } else {
                editor.style.lineHeight = spacing;
            }
            
            saveFormatPreferences();
            editor.focus();
        });
    });
    
    function getSelectedNodes(range) {
        const startNode = range.startContainer;
        const endNode = range.endContainer;
        
        if (startNode === endNode) {
            return [startNode];
        }
        
        const nodes = [];
        const walker = document.createTreeWalker(
            range.commonAncestorContainer,
            NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT,
            { acceptNode: function(node) { return NodeFilter.FILTER_ACCEPT; } }
        );
        
        let currentNode = walker.currentNode;
        let startFound = false;
        
        while (currentNode) {
            if (currentNode === startNode) {
                startFound = true;
            }
            
            if (startFound) {
                nodes.push(currentNode);
            }
            
            if (currentNode === endNode) {
                break;
            }
            
            currentNode = walker.nextNode();
        }
        
        return nodes;
    }
    
    // Theme Controls - NEW VERSION with SELECT element
    document.getElementById('editor-theme').addEventListener('change', function() {
        const theme = this.value;
        setTheme(theme);
    });
    
    function setTheme(theme) {
        currentTheme = theme;
        editor.className = 'editor';
        
        switch (theme) {
            case 'dark':
                editor.style.backgroundColor = '#2d2d2d';
                editor.style.color = '#f8f8f2';
                break;
            case 'blue':
                editor.style.backgroundColor = '#e8f4f8';
                editor.style.color = '#333';
                break;
            case 'green':
                editor.style.backgroundColor = '#e8f8e8';
                editor.style.color = '#333';
                break;
            case 'sepia':
                editor.style.backgroundColor = '#f8f4e8';
                editor.style.color = '#5b4636';
                break;
            case 'red':
                editor.style.backgroundColor = '#f8e8e8';
                editor.style.color = '#333';
                break;
            case 'beige':
                editor.style.backgroundColor = '#f5f5dc';
                editor.style.color = '#333';
                break;
            case 'lavender':
                editor.style.backgroundColor = '#e6e6fa';
                editor.style.color = '#333';
                break;
            default: // light
                editor.style.backgroundColor = '#ffffff';
                editor.style.color = '#333';
                break;
        }
        
        // Update the select element
        const themeSelect = document.getElementById('editor-theme');
        if (themeSelect && themeSelect.value !== theme) {
            themeSelect.value = theme;
        }
        
        // Save theme preference
        saveFormatPreferences();
    }
    
    // Restore theme preference
    const savedTheme = localStorage.getItem('notepad_theme');
    if (savedTheme) {
        setTheme(savedTheme);
    }
    
    // Load and apply all formatting preferences
    loadFormatPreferences();
    
    // Share functionality
    document.getElementById('share-btn').addEventListener('click', function() {
        // Generate a unique ID for the document
        const docId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
        
        // Save the document to localStorage (in a real app, this would be server-side)
        localStorage.setItem(`shared_doc_${docId}`, editor.innerHTML);
        localStorage.setItem(`shared_doc_${docId}_expires`, new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString());
        
        // Generate share link (in a real app, this would be a proper URL)
        const shareUrl = window.location.origin + window.location.pathname + '?doc=' + docId;
        shareLink.value = shareUrl;
        
        // Show share modal
        const shareModal = new bootstrap.Modal(document.getElementById('shareModal'));
        shareModal.show();
    });
    
    // Copy share link
    document.getElementById('copy-link-btn').addEventListener('click', function() {
        shareLink.select();
        document.execCommand('copy');
        
        // Show copied feedback
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-check"></i>';
        setTimeout(() => {
            this.innerHTML = originalText;
        }, 2000);
    });
    
    // Social sharing buttons
    document.querySelectorAll('.share-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const platform = this.getAttribute('data-platform');
            const url = encodeURIComponent(shareLink.value);
            const title = encodeURIComponent(currentFileName);
            
            let shareUrl = '';
            
            switch (platform) {
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${title}%20${url}`;
                    break;
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}`;
                    break;
                case 'email':
                    shareUrl = `mailto:?subject=${title}&body=${url}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank');
            }
        });
    });
    
    // Check if we have a shared document to load
    const urlParams = new URLSearchParams(window.location.search);
    const docId = urlParams.get('doc');
    
    if (docId) {
        const sharedContent = localStorage.getItem(`shared_doc_${docId}`);
        const expires = localStorage.getItem(`shared_doc_${docId}_expires`);
        
        if (sharedContent && expires) {
            const expiryDate = new Date(expires);
            if (expiryDate > new Date()) {
                editor.innerHTML = sharedContent;
                currentDocumentContent = editor.innerHTML;
                currentFileName = 'Shared Document';
                updateStatus();
            }
        }
    }
    
    // Initialize status
    updateStatus();
    
    function initSavedNotes() {
        // Add tooltip to save note button if it doesn't have one
        if (!saveNoteBtn.hasAttribute('title')) {
            saveNoteBtn.setAttribute('title', 'Save Current Note');
            new bootstrap.Tooltip(saveNoteBtn);
        }
        
        // Load and display saved notes
        loadSavedNotes();
    }
    
    // Add cleanup function for tooltips
    function cleanupTooltips() {
        // Find and remove all tooltip elements in the DOM
        const tooltipElements = document.querySelectorAll('.tooltip');
        tooltipElements.forEach(tooltip => {
            tooltip.remove();
        });
        
        // Dispose of all Bootstrap tooltip instances to prevent memory leaks
        document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(element => {
            const tooltipInstance = bootstrap.Tooltip.getInstance(element);
            if (tooltipInstance) {
                tooltipInstance.dispose();
            }
        });
    }
    
    // Modify updateSavedNotesList to include cleanup
    function updateSavedNotesList(notes) {
        // Clean up any existing tooltips before updating the list
        cleanupTooltips();
        
        const notesContainer = document.getElementById('saved-notes-container');
        if (!notesContainer) return;
        
        // Clear existing list
        notesContainer.innerHTML = '';
        
        if (notes.length === 0) {
            const emptyMsg = document.createElement('div');
            emptyMsg.className = 'note-empty-state';
            emptyMsg.innerHTML = '<i class="fas fa-sticky-note fa-2x mb-2 text-muted"></i><p>No saved notes yet</p>';
            notesContainer.appendChild(emptyMsg);
            return;
        }
        
        // Add bulk actions section
        const bulkActionsDiv = document.createElement('div');
        bulkActionsDiv.className = 'd-flex justify-content-between align-items-center mb-3 border-bottom pb-2';
        
        // Create left section with select options
        const leftSection = document.createElement('div');
        leftSection.className = 'd-flex align-items-center';
        
        const selectAllLabel = document.createElement('div');
        selectAllLabel.className = 'form-check me-3';
        
        const selectAllCheckbox = document.createElement('input');
        selectAllCheckbox.type = 'checkbox';
        selectAllCheckbox.className = 'form-check-input';
        selectAllCheckbox.id = 'select-all-notes';
        
        const selectAllText = document.createElement('label');
        selectAllText.className = 'form-check-label';
        selectAllText.htmlFor = 'select-all-notes';
        selectAllText.textContent = 'Select All';
        
        selectAllLabel.appendChild(selectAllCheckbox);
        selectAllLabel.appendChild(selectAllText);
        
        // Create select options dropdown
        const selectOptionsDropdown = document.createElement('div');
        selectOptionsDropdown.className = 'dropdown me-2';
        
        const selectOptionsButton = document.createElement('button');
        selectOptionsButton.className = 'btn btn-sm btn-outline-secondary dropdown-toggle';
        selectOptionsButton.setAttribute('data-bs-toggle', 'dropdown');
        selectOptionsButton.innerHTML = '<i class="fas fa-filter me-1"></i> Select by Filter';
        
        const selectOptionsMenu = document.createElement('ul');
        selectOptionsMenu.className = 'dropdown-menu';
        
        // Add dropdown options
        const selectOptions = [
            { label: 'Notes from last 7 days', action: () => selectNotesByDate(7) },
            { label: 'Notes from last 30 days', action: () => selectNotesByDate(30) },
            { label: 'Clear all selections', action: clearAllSelections },
            { label: 'Select by search', action: selectNotesBySearch }
        ];
        
        selectOptions.forEach(option => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.className = 'dropdown-item';
            a.href = '#';
            a.textContent = option.label;
            a.addEventListener('click', (e) => {
                e.preventDefault();
                option.action();
            });
            li.appendChild(a);
            selectOptionsMenu.appendChild(li);
        });
        
        selectOptionsDropdown.appendChild(selectOptionsButton);
        selectOptionsDropdown.appendChild(selectOptionsMenu);
        
        leftSection.appendChild(selectAllLabel);
        leftSection.appendChild(selectOptionsDropdown);
        
        // Create right section with delete button
        const deleteSelectedBtn = document.createElement('button');
        deleteSelectedBtn.className = 'btn btn-danger btn-sm';
        deleteSelectedBtn.id = 'delete-selected-notes';
        deleteSelectedBtn.innerHTML = '<i class="fas fa-trash me-1"></i> Delete Selected Notes';
        deleteSelectedBtn.style.display = 'none'; // Initially hidden
        
        bulkActionsDiv.appendChild(leftSection);
        bulkActionsDiv.appendChild(deleteSelectedBtn);
        
        notesContainer.appendChild(bulkActionsDiv);
        
        // Add event listeners for select all checkbox
        selectAllCheckbox.addEventListener('change', function() {
            const checkboxes = notesContainer.querySelectorAll('.note-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
            
            // Show/hide delete button based on selection
            updateDeleteSelectedButton();
        });
        
        // Create notes list
        const notesList = document.createElement('div');
        notesList.className = 'notes-list';
        notesContainer.appendChild(notesList);
        
        // Sort notes by date (newest first)
        notes.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        // Add notes to list with checkboxes
        notes.forEach(note => {
            const noteItem = document.createElement('div');
            noteItem.className = 'saved-note-item';
            noteItem.setAttribute('data-id', note.id);
            
            // Add checkbox
            const checkboxDiv = document.createElement('div');
            checkboxDiv.className = 'form-check me-2';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'form-check-input note-checkbox';
            checkbox.setAttribute('data-id', note.id);
            checkbox.addEventListener('change', function() {
                // Update selected styling
                noteItem.classList.toggle('selected', this.checked);
                // Update delete button visibility
                updateDeleteSelectedButton();
            });
            
            checkboxDiv.appendChild(checkbox);
            
            const noteInfo = document.createElement('div');
            noteInfo.className = 'flex-grow-1';
            
            // Make the note info clickable to toggle checkbox
            noteInfo.style.cursor = 'pointer';
            noteInfo.addEventListener('click', function(e) {
                // Don't toggle if user is selecting text
                if (window.getSelection().toString()) {
                    return;
                }
                // Toggle checkbox
                checkbox.checked = !checkbox.checked;
                
                // Trigger change event manually
                const event = new Event('change');
                checkbox.dispatchEvent(event);
            });
            
            const noteTitle = document.createElement('h6');
            noteTitle.className = 'note-title';
            noteTitle.textContent = note.title;
            
            const noteDate = document.createElement('small');
            noteDate.className = 'text-muted d-block';
            noteDate.textContent = new Date(note.date).toLocaleString();
            
            noteInfo.appendChild(noteTitle);
            noteInfo.appendChild(noteDate);
            
            const btnGroup = document.createElement('div');
            btnGroup.className = 'note-actions';
            
            const loadBtn = document.createElement('button');
            loadBtn.className = 'btn btn-sm btn-outline-primary';
            loadBtn.innerHTML = '<i class="fas fa-file-import"></i>';
            loadBtn.title = 'Load Note';
            loadBtn.setAttribute('data-bs-toggle', 'tooltip');
            loadBtn.setAttribute('data-bs-placement', 'top');
            loadBtn.addEventListener('click', function() {
                loadNote(note.id);
            });
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'btn btn-sm btn-outline-danger';
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.title = 'Delete Note';
            deleteBtn.setAttribute('data-bs-toggle', 'tooltip');
            deleteBtn.setAttribute('data-bs-placement', 'top');
            deleteBtn.addEventListener('click', function() {
                deleteNote(note.id);
            });
            
            btnGroup.appendChild(loadBtn);
            btnGroup.appendChild(deleteBtn);
            
            noteItem.appendChild(checkboxDiv);
            noteItem.appendChild(noteInfo);
            noteItem.appendChild(btnGroup);
            
            notesList.appendChild(noteItem);
            
            // Initialize tooltips for the buttons
            new bootstrap.Tooltip(loadBtn);
            new bootstrap.Tooltip(deleteBtn);
        });
        
        // Add event listener for delete selected button
        deleteSelectedBtn.addEventListener('click', deleteSelectedNotes);
        
        // Function to update delete selected button visibility
        function updateDeleteSelectedButton() {
            const selectedCheckboxes = notesContainer.querySelectorAll('.note-checkbox:checked');
            deleteSelectedBtn.style.display = selectedCheckboxes.length > 0 ? 'block' : 'none';
        }
    }
    
    // Add function to delete selected notes
    function deleteSelectedNotes() {
        const selectedCheckboxes = document.querySelectorAll('.note-checkbox:checked');
        
        if (selectedCheckboxes.length === 0) {
            return;
        }
        
        if (!confirm(`Are you sure you want to delete ${selectedCheckboxes.length} selected notes? This action cannot be undone.`)) {
            return;
        }
        
        // Clean up tooltips first
        cleanupTooltips();
        
        let savedNotes = getSavedNotes();
        const noteIdsToDelete = Array.from(selectedCheckboxes).map(checkbox => checkbox.getAttribute('data-id'));
        
        // Filter out selected notes
        savedNotes = savedNotes.filter(note => !noteIdsToDelete.includes(note.id));
        
        // Save updated notes
        localStorage.setItem('saved_notes', JSON.stringify(savedNotes));
        
        // Update UI
        updateSavedNotesList(savedNotes);
        
        // Show success message
        showNotification(`${noteIdsToDelete.length} notes successfully deleted`, 'info');
    }
    
    initSavedNotes();
    
    // Initialize tooltips for all buttons
    initializeActionButtonTooltips();

    // Add event listener to document to automatically clean up tooltips on mouse click
    document.addEventListener('click', function(e) {
        // If the clicked element isn't a tooltip trigger, clean up tooltips
        if (!e.target.hasAttribute('data-bs-toggle') || e.target.getAttribute('data-bs-toggle') !== 'tooltip') {
            cleanupTooltips();
        }
    });

    // Add necessary functions for selection
    function selectNotesByDate(days) {
        const cutoffDate = new Date();
        cutoffDate.setDate(cutoffDate.getDate() - days);
        
        const noteCheckboxes = document.querySelectorAll('.note-checkbox');
        let selectedCount = 0;
        
        noteCheckboxes.forEach(checkbox => {
            const noteId = checkbox.getAttribute('data-id');
            const notes = getSavedNotes();
            const note = notes.find(n => n.id === noteId);
            
            if (note && new Date(note.date) >= cutoffDate) {
                checkbox.checked = true;
                // Update styling
                const noteItem = checkbox.closest('.saved-note-item');
                if (noteItem) noteItem.classList.add('selected');
                selectedCount++;
            }
        });
        
        updateDeleteSelectedButton();
        showNotification(`${selectedCount} notes selected`, 'info');
    }

    function clearAllSelections() {
        const checkboxes = document.querySelectorAll('.note-checkbox');
        checkboxes.forEach(checkbox => {
            checkbox.checked = false;
            // Update styling
            const noteItem = checkbox.closest('.saved-note-item');
            if (noteItem) noteItem.classList.remove('selected');
        });
        
        // Update select all checkbox
        const selectAllCheckbox = document.getElementById('select-all-notes');
        if (selectAllCheckbox) selectAllCheckbox.checked = false;
        
        updateDeleteSelectedButton();
        showNotification('All selections cleared', 'info');
    }

    function selectNotesBySearch() {
        const searchTerm = prompt('Enter search term:');
        if (!searchTerm) return;
        
        const noteCheckboxes = document.querySelectorAll('.note-checkbox');
        let selectedCount = 0;
        
        noteCheckboxes.forEach(checkbox => {
            const noteId = checkbox.getAttribute('data-id');
            const notes = getSavedNotes();
            const note = notes.find(n => n.id === noteId);
            
            if (note && (
                note.title.toLowerCase().includes(searchTerm.toLowerCase()) || 
                note.content.toLowerCase().includes(searchTerm.toLowerCase())
            )) {
                checkbox.checked = true;
                // Update styling
                const noteItem = checkbox.closest('.saved-note-item');
                if (noteItem) noteItem.classList.add('selected');
                selectedCount++;
            }
        });
        
        updateDeleteSelectedButton();
        if (selectedCount > 0) {
            showNotification(`${selectedCount} notes found for "${searchTerm}"`, 'info');
        } else {
            showNotification(`No notes found for "${searchTerm}"`, 'info');
        }
    }
}); 
    </script>
</body>
</html> 